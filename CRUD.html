<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <style>
        table {
            border-collapse: collapse;
        }

        td,
        th {
            padding: 10px;
        }

        img {
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <script>

        let editIndex = -1;

        let students = [
            { name: 'dhoro sir', rollno: 101, dept: 'cse', image: 'https://du-website.s3.ap-south-1.amazonaws.com/U01/Faculty-Photo/15---28-04-2023-02-07-35.jpg' },
            { name: 'padu sir', rollno: 102, dept: 'cse', image: 'https://du-website.s3.ap-south-1.amazonaws.com/U01/Faculty-Photo/6---28-04-2023-02-06-07.jpg' },
            { name: 'dhama sir', rollno: 103, dept: 'cse', image: 'https://du-website.s3.ap-south-1.amazonaws.com/U01/Faculty-Photo/335---27-01-2025-09-33-28.jpg' },
            { name: 'jamboo sir', rollno: 104, dept: 'cse', image: 'https://du-website.s3.ap-south-1.amazonaws.com/U01/Faculty-Photo/334---28-04-2023-01-34-00.jpg' }
        ];

        $(document).ready(function () {
            display();

            $("#toAddStudent").click(function () {
                let rollno = $("#forRollno").val()
                let name = $("#forName").val()
                let dept = $("#forDept").val()
                let image = $("#forImage").val()

                let data = { rollno, name, dept, image };

                if (editIndex == -1) {
                    students.push(data)
                }
                else {
                    students[editIndex] = data;
                    editIndex = -1;
                    $("#toAddStudent").text("Add student");
                }
                $("#forRollno").val("");
                $("#forName").val("");
                $("#forDept").val("");
                $("#forImage").val("");
                display();
            });

        });

        function display() {
            let formatedData = students.map((s) => {
                temp = '';
                temp += "<tr>" + "<td>" + s.rollno + "</td>" + "<td>" + s.name + "</td>" + "<td>" + s.dept + "</td>" + "<td><img width=100px src='" + s.image + "'></td>" + "<td><button onclick='editStu(" + s.rollno + ")'>Edit</button></td>" + "<td><button onclick='deleteStu(" + s.rollno + ")'>Delete</button></td>" + "</tr>"
                return temp;
            });

            let finalData = "<table border='1' >" + formatedData.join("") + "</table>"
            $("#displayData").html(finalData);
        }

        function deleteStu(rn) {
            let indexOfDelete = students.findIndex((s) => {
                return s.rollno == rn;
            });
            students.splice(indexOfDelete, 1);
            display();
        }

        function editStu(roll) {
            let indexToEdit = students.findIndex((s) => {
                return s.rollno == roll;
            });

            let student = students[indexToEdit];
            $("#forRollno").val(student.rollno);
            $("#forName").val(student.name);
            $("#forDept").val(student.dept);
            $("#forImage").val(student.image);

            editIndex = indexToEdit;

            $("#toAddStudent").html('Edit student');
        }

    </script>
    <h1>Details</h1>
    <table>
        <tr>
            <td><input type="text" id="forRollno" placeholder="Enter roll no"></td>
        </tr>
        <tr>
            <td><input type="text" id="forName" placeholder="Enter name"></td>
        </tr>
        <tr>
            <td><input type="text" id="forDept" placeholder="Enter department"></td>
        </tr>
        <tr>
            <td><input type="text" id="forImage" placeholder="Enter image url"></td>
        </tr>
        <tr>
            <td><button id="toAddStudent">Add student</button></td>
        </tr>
    </table>
    <h1>List of Students</h1>
    <div id="displayData"></div>
</body>

</html>